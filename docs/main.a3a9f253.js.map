{"version":3,"sources":["js/errors.js","js/messages.js","js/utils.js","js/main.js"],"names":["box_not_set","box_miss_params","no_translate","btnLabelConnect","btnLabelInstall","popupMessage","isMobile","test","navigator","userAgent","translate","msg","messages","console","error","BladeErrors","arrowImageData","btnImageData","BladeAirdrop","webLink","errors","btn","box","deeplink","attributes","init","document","getElementById","createBtn","getAttributes","createElement","innerHTML","className","type","img","src","prepend","setAttribute","appendChild","addBtnListener","addEventListener","e","validate","generateDeeplink","window","open","isBladeInstalled","createOverlay","bladeConnect","overlay","body","popup","Object","firebase","URL","entries","key","value","searchParams","set","search","encodeURIComponent","JSON","parse","forEach","dataset","onload"],"mappings":"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","file":"main.a3a9f253.js","sourceRoot":"..","sourcesContent":["export default {\n  box_not_set: \"We can find element with id: bladeNFTAirdrop\",\n  box_miss_params: \"Missing required parameters in attributes, (data-use-testnet, data-dapp-code, data-dapp-nonce, data-dapp-secret)\",\n  no_translate: \"Dont have message fo that\"\n};\n","export default {\n  btnLabelConnect: \"Connect Blade Wallet\",\n  btnLabelInstall: \"Install Blade Wallet\",\n  popupMessage: \"After instalation please go to your browser extensions panel and click on Blade Wallet icon, complette setup, refresh this page and connect to your Blade Wallet.\"\n}\n","import messages from \"./messages.js\";\nimport BladeErrors from \"./errors.js\";\n\nexport const isMobile = () => {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n};\n\nexport const translate = (msg) => {\n  return messages[msg] ?? console.error(BladeErrors.no_translate);\n};\n\n// function toDataURL(url, callback) {\n//   var xhr = new XMLHttpRequest();\n//   xhr.onload = function() {\n//     var reader = new FileReader();\n//     reader.onloadend = function() {\n//       callback(reader.result);\n//     }\n//     reader.readAsDataURL(xhr.response);\n//   };\n//   xhr.open('GET', url);\n//   xhr.responseType = 'blob';\n//   xhr.send();\n// }\n\n// toDataURL('../img/test.png', function(dataUrl) {\n//   console.log('RESULT:', dataUrl)\n// })\n","// import css from \"../css/main.css\";\nimport BladeErrors from \"./errors.js\";\n\nimport { isMobile, translate } from \"./utils.js\";\n\nconst arrowImageData = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjUiIGhlaWdodD0iMTk2IiB2aWV3Qm94PSIwIDAgNjUgMTk2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8bWFzayBpZD0ibWFzazBfMV85IiBzdHlsZT0ibWFzay10eXBlOmFscGhhIiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIxIiB5PSIwIiB3aWR0aD0iNjQiIGhlaWdodD0iMTk2Ij4KPHJlY3QgeD0iMSIgd2lkdGg9IjY0IiBoZWlnaHQ9IjE5NiIgZmlsbD0iI0Q5RDlEOSIvPgo8L21hc2s+CjxnIG1hc2s9InVybCgjbWFzazBfMV85KSI+CjxwYXRoIGQ9Ik0wLjY2NjY2NyAxODlDMC42NjY2NjcgMTkxLjk0NiAzLjA1NDQ4IDE5NC4zMzMgNiAxOTQuMzMzQzguOTQ1NTIgMTk0LjMzMyAxMS4zMzMzIDE5MS45NDYgMTEuMzMzMyAxODlDMTEuMzMzMyAxODYuMDU0IDguOTQ1NTIgMTgzLjY2NyA2IDE4My42NjdDMy4wNTQ0OCAxODMuNjY3IDAuNjY2NjY3IDE4Ni4wNTQgMC42NjY2NjcgMTg5Wk0zOC44MDIxIDYuMDQ0NTRDMzguMjc0NCA1Ljg4MTU1IDM3LjcxNDUgNi4xNzcyIDM3LjU1MTYgNi43MDQ4OEwzNC44OTU1IDE1LjMwNEMzNC43MzI1IDE1LjgzMTcgMzUuMDI4MiAxNi4zOTE2IDM1LjU1NTkgMTYuNTU0NkMzNi4wODM1IDE2LjcxNzYgMzYuNjQzNCAxNi40MjIgMzYuODA2NCAxNS44OTQzTDM5LjE2NzQgOC4yNTA1OEw0Ni44MTExIDEwLjYxMTVDNDcuMzM4NyAxMC43NzQ1IDQ3Ljg5ODYgMTAuNDc4OCA0OC4wNjE2IDkuOTUxMTZDNDguMjI0NiA5LjQyMzQ3IDQ3LjkyOSA4Ljg2MzU3IDQ3LjQwMTMgOC43MDA1OEwzOC44MDIxIDYuMDQ0NTRaTTYgMTkwQzEzLjgwMiAxOTAgMjMuMDIyOCAxODQuNTI1IDMxLjU4MjEgMTc1LjA4NkM0MC4xODExIDE2NS42MDMgNDguMjY0IDE1MS45NjEgNTMuNzcyMyAxMzUuMjUxQzY0Ljc5NDcgMTAxLjgxMyA2NS41Mjc2IDU2LjAzMDYgMzkuMzkxMyA2LjUzMzA3TDM3LjYyMjcgNy40NjY5M0M2My40OTc3IDU2LjQ2OTQgNjIuNzMwMiAxMDEuNjg3IDUxLjg3MjkgMTM0LjYyNEM0Ni40NDEzIDE1MS4xMDIgMzguNDg5NiAxNjQuNDkxIDMwLjEwMDUgMTczLjc0MkMyMS42NzE4IDE4My4wMzcgMTIuOTUxMiAxODggNiAxODhWMTkwWiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzFfOSkiLz4KPC9nPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzFfOSIgeDE9IjQzLjUwODEiIHkxPSItNi41IiB4Mj0iNi4wMTU3MiIgeTI9IjIwOS41MDMiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0id2hpdGUiIHN0b3Atb3BhY2l0eT0iMC43NSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IndoaXRlIiBzdG9wLW9wYWNpdHk9IjAuNTUiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K\";\nconst btnImageData = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIxNyIgaGVpZ2h0PSIxNyIgcng9IjguNSIgc3Ryb2tlPSIjQjFCMUIxIi8+CjxwYXRoIGQ9Ik03LjQwNjc2IDExLjg5MjJMOC41NjM4MyA5LjA1NDFMNy42MzU2IDYuNzI0MzdMNC43OTk5OSAxMy43OTJMMTAuNDQ1NSAxMy44MDAyTDkuNjk0NTYgMTEuODkyMkg3LjQwNjc2WiIgZmlsbD0iI0VFRUVFRSIvPgo8cGF0aCBkPSJNOC42OTk1NCAzTDguMDE0NDkgNC43MjMzNEw3Ljk4NjkgNC43OTE4MUM3LjgyODU2IDUuMjUwOTcgNy43NzU5OSA1LjczOTc5IDcuODMzMSA2LjIyMTk4QzcuODUxNjUgNi40MTczMyA3Ljg5MTAxIDYuNjEwMTYgNy45NTA1MSA2Ljc5NzIxQzcuOTYyMjUgNi44MzI5MSA3Ljk3NDU4IDYuODY4MDIgNy45ODgwOCA2LjkwMTk2TDEwLjc1NyAxMy44SDEzLjA3OThMOC42OTk1NCAzWiIgZmlsbD0iI0VFRUVFRSIvPgo8L3N2Zz4K\";\n\n\nclass BladeAirdrop{\n  constructor() {\n    this.webLink = process.env.WEB_LINK\n    this.errors = BladeErrors;\n    this.translate = translate;\n    this.btn;\n    this.box;\n    this.deeplink;\n    this.attributes = {};\n    this.init();\n  }\n\n  init() {\n    this.box = document.getElementById(\"bladeNFTAirdrop\");\n\n    if (this.box) {\n      this.createBtn();\n      this.getAttributes();\n    } else {\n      console.error(this.errors.box_not_set);\n    }\n  }\n\n  createBtn() {\n    this.btn = document.createElement(\"button\");\n    this.btn.innerHTML = this.translate(\"btnLabelConnect\");\n    this.btn.className = \"blade-airdrop_btn\"\n    this.btn.type = \"button\";\n    const img = document.createElement(\"img\");\n    img.src = btnImageData;\n    img.className = \"blade-airdrop_btn-img\";\n    this.btn.prepend(img);\n\n    this.box.setAttribute(\"data-waiting\", false)\n    this.box.appendChild(this.btn);\n    this.addBtnListener();\n  }\n\n  addBtnListener() {\n    this.btn.addEventListener('click',(e) => {\n      this.validate();\n    })\n  }\n\n  validate() {\n    if (isMobile()) {\n      this.generateDeeplink();\n      window.open(this.deeplink);\n    } else {\n      if (this.isBladeInstalled()) {\n        this.createOverlay();\n        this.box.setAttribute(\"data-waiting\", true);\n      } else {\n        window.open(this.webLink)\n      }\n    }\n  }\n\n  isBladeInstalled() {\n    return bladeConnect;\n  }\n\n  createOverlay() {\n    const overlay = document.createElement(\"div\");\n    overlay.className = \"blade-airdrop_overlay\";\n    document.body.appendChild(overlay);\n\n    const popup = document.createElement(\"div\");\n    popup.className = \"blade-airdrop_popup\";\n    popup.innerHTML = this.translate(\"popupMessage\");\n    overlay.appendChild(popup);\n\n    const img = document.createElement(\"img\");\n    img.src = arrowImageData;\n    img.className = \"blade-airdrop_popup-img\";\n    popup.prepend(img);\n  }\n\n  generateDeeplink () {\n    let firebase = process.env.F_DEEPLINK;\n    let deeplink = new URL(process.env.DEEPLINK);\n\n    for (const [key, value] of Object.entries(this.attributes)) {\n      deeplink.searchParams.set(key, value);\n    };\n    deeplink.search = encodeURIComponent(deeplink.search);\n    this.deeplink = firebase + deeplink;\n  }\n\n  getAttributes() {\n    const keys = JSON.parse(process.env.ATTRIBUTE_KEYS);\n    keys.forEach(key => {\n      const value = this.box.dataset[key];\n\n      value\n        ? this.attributes[key] = value\n        : console.error(BladeErrors.box_miss_params);\n    });\n  }\n}\n\nwindow.onload = () => {\n  new BladeAirdrop();\n};\n"]}